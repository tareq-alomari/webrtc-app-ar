# webrtc-app (دليل عربي)

دليل التشغيل السريع لمشروع مكالمات الفيديو الجماعية (WebRTC)

المتطلبات

- Node.js 14+ أو أي إصدار حديث من Node
- متصفح يدعم WebRTC (Chrome/Edge/Firefox محدث)

تشغيل المشروع محليًا

1. افتح نافذة طرفية في جذر المشروع (حيث يوجد package.json و server.js).

```powershell
# تثبيت الحزم (إن لم تكن هناك حاجة فليس مطلوبًا)
npm install

# تشغيل الخادم
node server.js
```

2. افتح تابين في المتصفح (أو متصفحين مختلفين) واذهب إلى http://localhost:3000
3. في التاب الأول: اكتب اسم العرض ثم اضغط "بدء مكالمة جديدة". امنح الإذن بالوصول إلى الكاميرا والميكروفون عند المطالبة.
4. في التاب الثاني: اكتب اسمًا ثم اضغط "الانضمام إلى مكالمة". سيصلك إشعار موافقة على التاب الأول (المضيف) — قم بالموافقة للسماح للضيف بالانضمام.

ما الذي يجب التحقق منه أثناء العرض التجريبي

- يظهر الفيديو المحلي في بلاطة الفيديو المحلية أعلى اليسار.
- عند انضمام الطرف الآخر والموافقة عليه، سيظهر فيديوه.
- العناصر النائبة: إذا لم يصل فيديو الطرف البعيد بعد، سترى صورة دائرية تحتوي على الأحرف الأولى من الاسم واسم المستخدم.
- المحادثة: الرسائل تنتقل عبر خادم الإشارة؛ تفقد لوحة المحادثة على الجانب.
- سجل الكونسول: رسائل اتصال WebSocket، معرّف العميل المعطى، مرشّحات ICE، وتحولات حالة RTCPeerConnection (connected) مفيدة عند الاستكشاف.

استكشاف الأخطاء

- إذا انتهت مهلة getUserMedia سترى تنبيه حالة. تأكد من أن الكاميرا غير محجوزة من قبل نظام التشغيل أو تطبيق آخر.
- إذا ظهرت أخطاء 404 لرمز الموقع (favicon) فتأكد من أن الخادم يخدم `public/favicon.svg` (مضاف سابقًا).
- إذا لم يتلق المضيف طلبات الانضمام، تحقق من كونسول المتصفح لرسائل WebSocket وتأكد من أن كلا المتصفحين متصلان بنفس الأصل (localhost:3000).

ملاحظات

- هذا المثال يستخدم خادم إشارة بسيط عبر WebSocket. هذه البنية (mesh) لا تناسب عددًا كبيرًا من المشاركين. للاستخدام الإنتاجي، فكر في SFU أو MCU.

تحسينات اختيارية لاحقًا

- إضافة صور ملفات شخصية أو أيقونات مستخدمين مخزنة على الخادم.
- إضافة منطق لإعادة الاتصال عند انقطاع الشبكة المؤقت.
- تحسين شكل الواجهة للتوافق مع الأجهزة المحمولة.
